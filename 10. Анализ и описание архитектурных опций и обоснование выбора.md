# Анализ и описание архитектурных опций и обоснование выбора
## Выбор архитектурного подхода
При разработке программного обеспечения важно получить выгоду и увидеть результат как можно раньше. Скорость разработки, добавление новых функциональностей, тестирование продукта позволяет на первых этапах разработки программного обеспечения склониться в сторону монолитного как мобильного, так и серверного приложения.

При разработке важно не забывать разбиение на модули. При развитии функционала эти модули постепенно начнут отпочковываться от основного приложения, выходя на микросервисную архитектуру.

Итак, что даст монолитное приложение на первых шагах разработки:
- низкую стоимость работ;
- быстроту и простоту развертываемости приложения;
- быстрое внедрение функциональности;
- простоту тестирования до тех пор, пока само приложение не перерастет монолит по функциональности;
- повышенную защиту информации благодаря централизованной контрольной точке в монолитной архитектуре;
- улучшение производительности за счет общего кода и памяти.

## Выбор СХД
"Кто владеет информацией, тот владеет миром" (с) Ротшильд.

Выбор системы хранения данных - всегда сложная задача. Все системы хранения можно разделить на реляционные и не реляционные. Рассмотрим достоинства каждого типа.

Реляционная модель данных – логическая модель данных. В реляционной  модели достигается гораздо более  высокий уровень абстракции данных, чем в иерархической или сетевой.
Преимущества реляционных баз данных:
- простота и доступность для понимания. Единственной используемой информационной конструкцией является "таблица";
- строгие правила проектирования, базирующиеся на математическом аппарате;
- полная независимость данных. Изменения в прикладной программе при изменении реляционной БД минимальны;
- для организации запросов и написания программного продукта нет необходимости знать конкретную организацию БД во внешней памяти;
- удобно храненить структурированные данные;
- возможность интерактивного выполнения запросов.

Недостатки реляционной модели:
- предметная область не всегда может быть представлена табличном виде;
- множество таблиц приводит к трудностям в понимании структуры данных;
- занимает достаточно много внешней памяти;
- относительно низкая скорость доступа к данным;
- сложность структуры, вызванная процессом нормализации;
- типы данных ограничены (например, отсутствует тип данных "мультимедия" и т,д.);
- невозможно рассмотреть данных на разных уровнях абстракций;
- при определенных сочетаниях данных приходится принебрегать третьей, а иногда и второй, нормальной формой.

Нереляционная база данных — это база данных, в которой в отличие от большинства традиционных систем баз данных не используется табличная схема строк и столбцов. В этих базах данных применяется модель хранения, оптимизированная под конкретные требования типа хранимых данных.

Преимущества не реляционных баз данных:
- линейная масштабируемость за счет добавления новых узлов в кластер;
- гибкость;
- возможность работать с разными представлениями информации (в том числе и с мультимедией);
- высокая скорость обработки данных;
- высокая производительность за счет оптимизации для конкретных видов моделей данных (документной, графовой, колоночной или «ключ‑значение») и шаблонов доступа.

Недостатки не реляционных баз данных:
- ограниченная емкость встроенного языка запросов;
- сложности в поддержке всех ACID-требований к транзакциям (атомарность, консистентность, изоляция, долговечность) из-за того, что NoSQL-СУБД вместо CAP-модели (согласованность, доступность, устойчивость к разделению) скорее соответствуют модели BASE (базовая доступность, гибкое состояние и итоговая согласованность);
- сильная привязка приложения к конкретной СУБД из-за специфики внутреннего языка запросов и гибкой модели данных, ориентированной на конкретный случай.

В разрабатываемом программном продукте несколько модулей, по-разному обрабатываюших данных, что влияет на выбор типа базы данных. 
Так для модулей:
- пользователи;
- турниры;
- пользователи;
- сообщения

лучше испнользовать реляционную базу данных, так как данные в этих модулях легко представляются в табличном виде, имеют строгие правила. Это позволит легко работать с данными в них.

Аналогично для мобильного приложения.

Для модулей, не имеющих строгой структуры данных, а также работающих с большими объемами данных, актуально использование нереляционных БД. Таковыми являются следующие модули:
- тренировки;
- блоги;
- метрики.

### Реляционные базы данных

Выбор базы данных из реляционных складывается из следующих основных аспектов:
- тип лицензии для использования;
- совместимость с различными операционными системами;
- транзакционность;
- производительность;
- функциональность.

Ниже приведены сравнительные характеристики СУБД.

1. Совместимость с различными операционными системами 

Database Name|Windows|macOS|Linux|UNIX|iOS|Android
---|---|---|---|---|---|---
Microsoft SQL Server|Да|Нет|Да|Нет|Нет|Нет
MySQL|Да|Да|Да|Да| ?|Да
Oracle|Да|Нет|Да|Да|Нет|Нет
PostgreSQL|Да|Да|Да|Да|Нет|Да
SQLite|Да|Да|Да|Да|Да|Да

2. Основные функции

Database Name|ACID|Ссылочная целостность|Транзакции|Гранулярная блокировка|Управление параллельным доступом с помощью многоверсионности|Юникод|Интерфейс|Вывод типа
---|---|---|---|---|---|---|---|---
Microsoft SQL Server|Да|Да|Да|Да (Блокировка уровня строки)|Да|Да|GUI & SQL|Да
MySQL|Да2|Да3|Да2 кроме DDL|Да (Блокировка уровня строки)|Да|Да|GUI & SQL|Да
Oracle|Да|Да|Да кроме DDL|Да (Блокировка уровня строки)|Да|Да|API & GUI & SQL|Да
PostgreSQL|Да|Да|Да|Да (Блокировка уровня строки)|Да|Да|API & GUI & SQL|Нет
SQLite|Да|Да|Да|Нет (Блокировка на уровне базы данных)|Нет|Опционально|API & SQL|Да

3. Основные возможности

Database Name|Union|Intersect|Except|Inner joins|Outer joins|Inner selects|Merge joins|Blobs & Clobs|Общие выражения таблицы|Оконные функции|Параллельный запрос
---|---|---|---|---|---|---|---|---|---|---|---
Microsoft SQL Server|Да|Да|Да|Да|Да|Да|Да|Да|Да|Да|Да
MySQL|Да|Нет|Нет|Да|Да|Да|Нет|Да|Нет|Нет|Нет
Oracle|Да|Да|Да, через MINUS|Да|Да|Да|Да|Да|Да 1|Да|Да
PostgreSQL|Да|Да|Да|Да|Да|Да|Да|Да|Да|Да|Да
SQLite|Да|Да|Да|Да|Только LEFT|Да|Нет|Да|3.8.3+|Нет|Нет

4. Поддержка объектов "из коробки"

Database Name|Домен|Курсор|Триггер|Функция|Процедура|Внешняя процедура
---|---|---|---|---|---|---
Microsoft SQL Server|Да|Да|Да|Да|Да|Да
MySQL|Нет|Да|Да|Да|Да|Да
Oracle|Да|Да|Да|Да|Да|Да
PostgreSQL|Да|Да|Да|Да|Да|Да
SQLite|Нет|Нет|Да|Нет|Нет|Да

5. Ограничения

Database Name| Максимальный размер БД| Максимальный размер таблицы|Максимальный размер строки|Максимальное количество столбцов на строку|Максимальный размер Blob/Clob|Максимальный размер Char|Максимальный размер Number|Минимальное значение DATE|Максимальное значение DATE|Максимальный размер имени столбца
---|---------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|---|---|---|---|---|---|---|---
Microsoft SQL Server| 16 Збайт на документ| 524,272 Тбайт|8,060 байт/2Тбайт5|1,024/30,000(с разреженными столбцами)|2 Гбайт/Не ограничено (используя RBS/FILESTREAM объекты)|2 Гбайт5|126 бит2|0001|9999|128
MySQL| Не ограничено | MyISAM ограничения на хранения: 256 Тбайт; Innodb ограничения на хранения: 64 Тбайт |64 Кбайт3|4,0964|4 Гбайт (longtext, longblob)|64 Кбайт (текст)|64 бита|1000|9999|64
Oracle| 2Пбайт (со стандартным блоком 8k) 8Пбайт (с максимальным блоком 32k) 8Эбайт (с максимальным размером 32 Кбайт и опцией BIGFILE) | 4 Гбайт  размер блока (с табличным пространством BIGFILE)                           |8 Кбайт|1,000|128 Тбайт|32,767 Б10|126 bits|−4712|9999|30
PostgreSQL| Не ограничено| 32 Тбайт|1.6 Тбайт|250–1600 в зависимости от типа|1 Гбайт (текст, байт) - хранится в строке или 4 Тбайт (хранится в pg_largeobject)|1 Гбайт|Не ограничено|−4,713|5,874,897|63
SQLite| 128 Тбайт (231 страниц * (максимальный размер страницы 64 КБ) | Ограничено размером файла |Ограничено размером файла|32,767|2 GB|2 GB|64 bits|Нет типа DATE8|Нет типа DATE8|Не ограничено

Вывод:
Самым мощным инструментом работы с реляционными базами данных является Oracle, однако имеет проприетарную лицензию, в отличие от PostgreSQL. PostgreSQL немногим уступает Oracle, что делает выбор данного СУБД приоритетным. Если же говорить о Microsoft SQL Server, то оно имеет большое ограничение по совместимости с операционными системами и также является проприетарным.
Для мобильного приложения отлично подходит SQLite не смотря на все ограничения, которые она имеет. Основная причина - доступность для мобильных операционных систем. 

### Не реляционные базы данных

